#!/bin/bash

# Generate test data using PBBS.
../../pbbs/testData/graphData/gridGraph -d 3 100000 /tmp/grid

num_cores="1 2 4";

make clean
make BFS_impure
make BFS_pure

if [ $(hostname) = "hive.soic.indiana.edu" ];
then
    lock_for_experiments
    num_cores="8 16";
fi

# Impure version
for i in $num_cores; do ./BFS_impure -o BFS_impure_$i.html +RTS -N$i; done

# Pure version
for i in $num_cores; do ./BFS_pure -o BFS_pure_$i.html +RTS -N$i; done

if [ $(hostname) = "hive.soic.indiana.edu" ];
then
    unlock_for_experiments
fi

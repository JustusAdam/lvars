#!/bin/bash

set -e

make data

num_cores="1 2 4";

make BFS_impure
make BFS_pure
# make pp_impure
# make pp_pure

if [ $(hostname) = "hive.soic.indiana.edu" ];
then
    lock_for_experiments 1000
    num_cores="1 2 4 8 16 32";
fi

## BFS:

# Impure version
for i in $num_cores; do ./quick.exe +RTS -N$i; done

# Pure version
for i in $num_cores; do ./quick_pure.exe +RTS -N$i; done

if [ $(hostname) = "hive.soic.indiana.edu" ];
then
    unlock_for_experiments
fi
